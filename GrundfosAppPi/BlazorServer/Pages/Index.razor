@page "/"

<h1>Dashboard</h1>
<br>
<div class="width60">
    <div class="optionboxes">
        <div id="status-image" class="mat-layout-grid-cell">
            <p>MAGNA3</p>
            <image class="image" src="images/pumpe.png"></image>
        </div>
        <div id="status-image" class="mat-layout-grid-cell">
            <p>No warning/alarm</p>
            <image class="image" src="images/green_circle.png"></image>
        </div>
        <div id="status-image" class="mat-layout-grid-cell">

            @if (PumpInfo != null)
            {
                <p>Speed: @PumpInfo.Flow rpm</p>
                <br>
                <p>Control mode: @PumpInfo.Frequence</p>
                <p>Operating mode: @PumpInfo.Name</p>
                <p>Setpoint: @PumpInfo.PowerUsage m</p>
            }
        </div>
    </div>
</div>

<br>
<br>
<MatButton Unelevated="true" Icon="settings_remote" Id="first-row-button">Control Mode</MatButton>
<MatButton Unelevated="true" Icon="settings_remote" Id="first-row-button">Operating Mode</MatButton>
<MatButton Unelevated="true" Icon="control_point" Id="first-row-button">Setpoint</MatButton>
<MatButton Unelevated="true" Icon="clear" Id="first-row-button">Stop</MatButton>
<br>
<br>
<MatButton Unelevated="true" Id="second-row-button">Status</MatButton>
<MatButton Unelevated="true" Id="second-row-button">Settings</MatButton>
<MatButton Unelevated="true" Id="second-row-button">Scheduling (Enabled)</MatButton>
<MatButton Unelevated="true" Id="second-row-button">Alarms and warnings</MatButton>
<MatButton Unelevated="true" Id="second-row-button">Assist</MatButton>

<button @onclick="Test">Clic me</button>

@code {
    IOTHub iot = new IOTHub("HostName=IotProjekt.azure-devices.net;DeviceId=Pumpe1;SharedAccessKey=ZicGAUZfLLE4CcxTc4oCqz0gpm6i3ZzpuP+NG2oXxCs=");

    public PumpInfo PumpInfo { get; set; }


    protected override void OnInitialized()
    {
        base.OnInitialized();
    }


    async void Test()
    {
        PumpInfo = await iot.Receive();
        
        //StateHasChanged();
    }

}